<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/Student_Home_Page.css">
    <link rel="stylesheet" href="/static/css/Student_Account.css">
    <title>Student Account</title>
</head>
<body>
    <header class="top-nav">
        <div class="nav-container">
            <a id="Dashboard" href="/Student_Home">Dashboard</a>
            <a id="Progress" href="/Student_Progress">Progress</a>
            <a id="Grades" href="/Student_Grades">Grades</a>
            <a id="Schedule" href="/Student_Schedule">Schedule</a>
            <a id="Account" href="/Student_Account">Account</a>
            <a href="/Student_Settings">Settings</a>
        </div>
    </header>

    <div class="container">
        <div class="profile-picture-upload">
            <h2>Update Profile Picture</h2>
            <form method="POST" enctype="multipart/form-data" action="{{ url_for('upload_profile_pic') }}">
                <div class="custom-file-upload">
                    <label for="profile_picture">Choose File</label>
                    <input type="file" name="profile_pic" accept="image/*" id="profile_picture">
                    <span id="file-name">No file chosen</span>
                </div>
                <button type="submit">Upload</button>
            </form>
        </div>

        <div class="profile-picture">
            {% if profile_picture %}
            <div class="circle">
                <img class="Image_Profile" src="{{ url_for('static', filename='uploads/' + profile_picture) }}" alt="Profile Picture">
            </div>
            {% else %}
            <div class="circle default-image">
                <img class="Image_Profile" src="/static/img/Dancing_woman.gif" alt="Default Profile Picture">
            </div>
            {% endif %}
        </div>

        <form method="POST" action="/update_student_info">
            <h3>Personal Information</h3>
            <label for="firstname">First Name:</label>
            <input type="text" id="firstname" name="firstname" value="{{ firstname }}">

            <label for="middlename">Middle Name:</label>
            <input type="text" id="middlename" name="middlename" value="{{ middlename }}">

            <label for="lastname">Last Name:</label>
            <input type="text" id="lastname" name="lastname" value="{{ lastname }}">

            <label for="age">Age:</label>
            <input type="number" id="age" name="age" value="{{ age }}">

            <label for="sex">Sex:</label>
            <select id="sex" name="sex">
                <option value="Male" {% if sex == 'Male' %}selected{% endif %}>Male</option>
                <option value="Female" {% if sex == 'Female' %}selected{% endif %}>Female</option>
                <option value="Other" {% if sex == 'Other' %}selected{% endif %}>Other</option>
            </select>

            <label for="address">Address:</label>
            <input type="text" id="address" name="address" value="{{ address }}">

            <label for="cellphone_number">Cellphone Number:</label>
            <input type="text" id="cellphone_number" name="cellphone_number" value="{{ cellphone_number }}">

            <label for="Birth_place">Birth place:</label>
            <input type="text" id="Birth_place" name="Birth_place" value="{{ Birth_place }}">

            <label for="Birth_date">Birth date:</label>
            <input type="date" id="Birth_date" name="Birth_date" value="{{ Birth_date }}" class="date-picker">            

            <h3>Account Management</h3>
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" value="{{ username }}">

            <label for="password">New Password:</label>
            <input type="password" id="password" name="password" value="{{ password }}">

            <button type="submit">Update Information</button>
        </form>

        <form method="POST" action="{{ url_for('delete_account') }}" onsubmit="return confirmDeletion()">
            <h3>Delete Account</h3>
            <p>Please confirm by typing your full name and username:</p>
            <label for="confirm_firstname">First Name:</label>
            <input type="text" id="confirm_firstname" name="confirm_firstname">
            <label for="confirm_lastname">Last Name:</label>
            <input type="text" id="confirm_lastname" name="confirm_lastname">
            <label for="confirm_username">Username:</label>
            <input type="text" id="confirm_username" name="confirm_username">
            <button type="submit">Delete Account</button>
        </form>

        

        <div class="readonly-section">
            <h3>Educational Information</h3>
            <label for="course">Course:</label>
            <input type="text" id="course" name="course" value="{{ course }}" placeholder="{{ course }}" readonly>
            <label for="year">Year:</label>
            {% set year_display = year %}
            {% if year == 1 %}
                {% set year_display = "1st year" %}
            {% elif year == 2 %}
                {% set year_display = "2nd year" %}
            {% elif year == 3 %}
                {% set year_display = "3rd year" %}
            {% elif year == 4 %}
                {% set year_display = "4th year" %}
            {% endif %}
            <input type="text" id="year" name="year" value="{{ year_display }}" placeholder="{{ year_display }}" readonly>
        </div>

            {% with messages = get_flashed_messages(with_categories=True) %}
            {% if messages %}
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <p class="{{ category }}">{{ message }}</p>
                    {% endfor %}
                </div>
            {% endif %}
            {% endwith %}        
    </div>

    <script src="/static/javascript/Student_Account.js"></script>
    <script src="/static/javascript/Student_Home_Page.js"></script>
</body>
</html>